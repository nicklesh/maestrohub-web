{"dependencies":[{"name":"../threads","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":14},"end":{"line":2,"column":48,"index":62}}],"key":"K1yKq+VUoHdgwBY7Fz9TrE1h5uU=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  'use strict';\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"prepareUIRegistry\", {\n    enumerable: true,\n    get: function () {\n      return prepareUIRegistry;\n    }\n  });\n  var _threads = require(_dependencyMap[0]);\n  var _worklet_5591855314696_init_data = {\n    code: \"function reactNativeReanimated_FrameCallbackRegistryUITs1(){const frameCallbackRegistry={frameCallbackRegistry:new Map(),activeFrameCallbacks:new Set(),previousFrameTimestamp:null,nextCallId:0,runCallbacks:function(callId){var _this=this;const loop=function(timestamp){if(callId!==_this.nextCallId){return;}if(_this.previousFrameTimestamp===null){_this.previousFrameTimestamp=timestamp;}const delta=timestamp-_this.previousFrameTimestamp;_this.activeFrameCallbacks.forEach(function(callbackId){const callbackDetails=_this.frameCallbackRegistry.get(callbackId);const{startTime:startTime}=callbackDetails;if(startTime===null){callbackDetails.startTime=timestamp;callbackDetails.callback({timestamp:timestamp,timeSincePreviousFrame:null,timeSinceFirstFrame:0});}else{callbackDetails.callback({timestamp:timestamp,timeSincePreviousFrame:delta,timeSinceFirstFrame:timestamp-startTime});}});if(_this.activeFrameCallbacks.size>0){_this.previousFrameTimestamp=timestamp;requestAnimationFrame(loop);}else{_this.previousFrameTimestamp=null;}};if(this.activeFrameCallbacks.size===1&&callId===this.nextCallId){requestAnimationFrame(loop);}},registerFrameCallback:function(callback,callbackId){this.frameCallbackRegistry.set(callbackId,{callback:callback,startTime:null});},unregisterFrameCallback:function(callbackId){this.manageStateFrameCallback(callbackId,false);this.frameCallbackRegistry.delete(callbackId);},manageStateFrameCallback:function(callbackId,state){if(callbackId===-1){return;}if(state){this.activeFrameCallbacks.add(callbackId);this.runCallbacks(this.nextCallId);}else{const callback=this.frameCallbackRegistry.get(callbackId);callback.startTime=null;this.activeFrameCallbacks.delete(callbackId);if(this.activeFrameCallbacks.size===0){this.nextCallId+=1;}}}};global._frameCallbackRegistry=frameCallbackRegistry;}\"\n  };\n  var prepareUIRegistry = (0, _threads.runOnUIImmediately)(function () {\n    var reactNativeReanimated_FrameCallbackRegistryUITs1 = function () {\n      var frameCallbackRegistry = {\n        frameCallbackRegistry: new Map(),\n        activeFrameCallbacks: new Set(),\n        previousFrameTimestamp: null,\n        nextCallId: 0,\n        runCallbacks(callId) {\n          var loop = timestamp => {\n            if (callId !== this.nextCallId) {\n              return;\n            }\n            if (this.previousFrameTimestamp === null) {\n              this.previousFrameTimestamp = timestamp;\n            }\n            var delta = timestamp - this.previousFrameTimestamp;\n            this.activeFrameCallbacks.forEach(callbackId => {\n              var callbackDetails = this.frameCallbackRegistry.get(callbackId);\n              var startTime = callbackDetails.startTime;\n              if (startTime === null) {\n                // First frame\n                callbackDetails.startTime = timestamp;\n                callbackDetails.callback({\n                  timestamp,\n                  timeSincePreviousFrame: null,\n                  timeSinceFirstFrame: 0\n                });\n              } else {\n                // Next frame\n                callbackDetails.callback({\n                  timestamp,\n                  timeSincePreviousFrame: delta,\n                  timeSinceFirstFrame: timestamp - startTime\n                });\n              }\n            });\n            if (this.activeFrameCallbacks.size > 0) {\n              this.previousFrameTimestamp = timestamp;\n              requestAnimationFrame(loop);\n            } else {\n              this.previousFrameTimestamp = null;\n            }\n          };\n\n          // runCallback() should only be called after registering a callback,\n          // so if there is only one active callback, then it means that there were\n          // zero previously and the loop isn't running yet.\n          if (this.activeFrameCallbacks.size === 1 && callId === this.nextCallId) {\n            requestAnimationFrame(loop);\n          }\n        },\n        registerFrameCallback(callback, callbackId) {\n          this.frameCallbackRegistry.set(callbackId, {\n            callback,\n            startTime: null\n          });\n        },\n        unregisterFrameCallback(callbackId) {\n          this.manageStateFrameCallback(callbackId, false);\n          this.frameCallbackRegistry.delete(callbackId);\n        },\n        manageStateFrameCallback(callbackId, state) {\n          if (callbackId === -1) {\n            return;\n          }\n          if (state) {\n            this.activeFrameCallbacks.add(callbackId);\n            this.runCallbacks(this.nextCallId);\n          } else {\n            var callback = this.frameCallbackRegistry.get(callbackId);\n            callback.startTime = null;\n            this.activeFrameCallbacks.delete(callbackId);\n            if (this.activeFrameCallbacks.size === 0) {\n              this.nextCallId += 1;\n            }\n          }\n        }\n      };\n      global._frameCallbackRegistry = frameCallbackRegistry;\n    };\n    reactNativeReanimated_FrameCallbackRegistryUITs1.__closure = {};\n    reactNativeReanimated_FrameCallbackRegistryUITs1.__workletHash = 5591855314696;\n    reactNativeReanimated_FrameCallbackRegistryUITs1.__initData = _worklet_5591855314696_init_data;\n    return reactNativeReanimated_FrameCallbackRegistryUITs1;\n  }());\n});","lineCount":102,"map":[[2,2,1,0],[2,14,1,12],[4,2,1,13,"Object"],[4,8,1,13],[4,9,1,13,"defineProperty"],[4,23,1,13],[4,24,1,13,"exports"],[4,31,1,13],[5,4,1,13,"value"],[5,9,1,13],[6,2,1,13],[7,2,29,0,"Object"],[7,8,29,0],[7,9,29,0,"defineProperty"],[7,23,29,0],[7,24,29,0,"exports"],[7,31,29,0],[8,4,29,0,"enumerable"],[8,14,29,0],[9,4,29,0,"get"],[9,7,29,0],[9,18,29,0,"get"],[9,19,29,0],[10,6,29,0],[10,13,29,0,"prepareUIRegistry"],[10,30,29,0],[11,4,29,0],[12,2,29,0],[13,2,2,0],[13,6,2,0,"_threads"],[13,14,2,0],[13,17,2,0,"require"],[13,24,2,0],[13,25,2,0,"_dependencyMap"],[13,39,2,0],[14,2,2,48],[14,6,2,48,"_worklet_5591855314696_init_data"],[14,38,2,48],[15,4,2,48,"code"],[15,8,2,48],[16,2,2,48],[17,2,29,7],[17,6,29,13,"prepareUIRegistry"],[17,23,29,30],[17,26,29,33],[17,30,29,33,"runOnUIImmediately"],[17,38,29,51],[17,39,29,51,"runOnUIImmediately"],[17,57,29,51],[17,59,29,52],[18,4,29,52],[18,8,29,52,"reactNativeReanimated_FrameCallbackRegistryUITs1"],[18,56,29,52],[18,68,29,52,"reactNativeReanimated_FrameCallbackRegistryUITs1"],[18,69,29,52],[18,71,29,58],[19,6,32,2],[19,10,32,8,"frameCallbackRegistry"],[19,31,32,54],[19,34,32,57],[20,8,33,4,"frameCallbackRegistry"],[20,29,33,25],[20,31,33,27],[20,35,33,31,"Map"],[20,38,33,34],[20,39,33,60],[20,40,33,61],[21,8,34,4,"activeFrameCallbacks"],[21,28,34,24],[21,30,34,26],[21,34,34,30,"Set"],[21,37,34,33],[21,38,34,42],[21,39,34,43],[22,8,35,4,"previousFrameTimestamp"],[22,30,35,26],[22,32,35,28],[22,36,35,32],[23,8,36,4,"nextCallId"],[23,18,36,14],[23,20,36,16],[23,21,36,17],[24,8,38,4,"runCallbacks"],[24,20,38,16,"runCallbacks"],[24,21,38,17,"callId"],[24,27,38,23],[24,29,38,25],[25,10,39,6],[25,14,39,12,"loop"],[25,18,39,16],[25,21,39,20,"timestamp"],[25,30,39,37],[25,34,39,42],[26,12,40,8],[26,16,40,12,"callId"],[26,22,40,18],[26,27,40,23],[26,31,40,27],[26,32,40,28,"nextCallId"],[26,42,40,38],[26,44,40,40],[27,14,41,10],[28,12,42,8],[29,12,43,8],[29,16,43,12],[29,20,43,16],[29,21,43,17,"previousFrameTimestamp"],[29,43,43,39],[29,48,43,44],[29,52,43,48],[29,54,43,50],[30,14,44,10],[30,18,44,14],[30,19,44,15,"previousFrameTimestamp"],[30,41,44,37],[30,44,44,40,"timestamp"],[30,53,44,49],[31,12,45,8],[32,12,47,8],[32,16,47,14,"delta"],[32,21,47,19],[32,24,47,22,"timestamp"],[32,33,47,31],[32,36,47,34],[32,40,47,38],[32,41,47,39,"previousFrameTimestamp"],[32,63,47,61],[33,12,49,8],[33,16,49,12],[33,17,49,13,"activeFrameCallbacks"],[33,37,49,33],[33,38,49,34,"forEach"],[33,45,49,41],[33,46,49,43,"callbackId"],[33,56,49,61],[33,60,49,66],[34,14,50,10],[34,18,50,16,"callbackDetails"],[34,33,50,31],[34,36,50,34],[34,40,50,38],[34,41,50,39,"frameCallbackRegistry"],[34,62,50,60],[34,63,50,61,"get"],[34,66,50,64],[34,67,50,65,"callbackId"],[34,77,50,75],[34,78,50,77],[35,14,52,10],[35,18,52,18,"startTime"],[35,27,52,27],[35,30,52,32,"callbackDetails"],[35,45,52,47],[35,46,52,18,"startTime"],[35,55,52,27],[36,14,54,10],[36,18,54,14,"startTime"],[36,27,54,23],[36,32,54,28],[36,36,54,32],[36,38,54,34],[37,16,55,12],[38,16,56,12,"callbackDetails"],[38,31,56,27],[38,32,56,28,"startTime"],[38,41,56,37],[38,44,56,40,"timestamp"],[38,53,56,49],[39,16,58,12,"callbackDetails"],[39,31,58,27],[39,32,58,28,"callback"],[39,40,58,36],[39,41,58,37],[40,18,59,14,"timestamp"],[40,27,59,23],[41,18,60,14,"timeSincePreviousFrame"],[41,40,60,36],[41,42,60,38],[41,46,60,42],[42,18,61,14,"timeSinceFirstFrame"],[42,37,61,33],[42,39,61,35],[43,16,62,12],[43,17,62,13],[43,18,62,14],[44,14,63,10],[44,15,63,11],[44,21,63,17],[45,16,64,12],[46,16,65,12,"callbackDetails"],[46,31,65,27],[46,32,65,28,"callback"],[46,40,65,36],[46,41,65,37],[47,18,66,14,"timestamp"],[47,27,66,23],[48,18,67,14,"timeSincePreviousFrame"],[48,40,67,36],[48,42,67,38,"delta"],[48,47,67,43],[49,18,68,14,"timeSinceFirstFrame"],[49,37,68,33],[49,39,68,35,"timestamp"],[49,48,68,44],[49,51,68,47,"startTime"],[50,16,69,12],[50,17,69,13],[50,18,69,14],[51,14,70,10],[52,12,71,8],[52,13,71,9],[52,14,71,10],[53,12,73,8],[53,16,73,12],[53,20,73,16],[53,21,73,17,"activeFrameCallbacks"],[53,41,73,37],[53,42,73,38,"size"],[53,46,73,42],[53,49,73,45],[53,50,73,46],[53,52,73,48],[54,14,74,10],[54,18,74,14],[54,19,74,15,"previousFrameTimestamp"],[54,41,74,37],[54,44,74,40,"timestamp"],[54,53,74,49],[55,14,75,10,"requestAnimationFrame"],[55,35,75,31],[55,36,75,32,"loop"],[55,40,75,36],[55,41,75,37],[56,12,76,8],[56,13,76,9],[56,19,76,15],[57,14,77,10],[57,18,77,14],[57,19,77,15,"previousFrameTimestamp"],[57,41,77,37],[57,44,77,40],[57,48,77,44],[58,12,78,8],[59,10,79,6],[59,11,79,7],[61,10,81,6],[62,10,82,6],[63,10,83,6],[64,10,84,6],[64,14,84,10],[64,18,84,14],[64,19,84,15,"activeFrameCallbacks"],[64,39,84,35],[64,40,84,36,"size"],[64,44,84,40],[64,49,84,45],[64,50,84,46],[64,54,84,50,"callId"],[64,60,84,56],[64,65,84,61],[64,69,84,65],[64,70,84,66,"nextCallId"],[64,80,84,76],[64,82,84,78],[65,12,85,8,"requestAnimationFrame"],[65,33,85,29],[65,34,85,30,"loop"],[65,38,85,34],[65,39,85,35],[66,10,86,6],[67,8,87,4],[67,9,87,5],[68,8,89,4,"registerFrameCallback"],[68,29,89,25,"registerFrameCallback"],[68,30,90,6,"callback"],[68,38,90,46],[68,40,91,6,"callbackId"],[68,50,91,24],[68,52,92,6],[69,10,93,6],[69,14,93,10],[69,15,93,11,"frameCallbackRegistry"],[69,36,93,32],[69,37,93,33,"set"],[69,40,93,36],[69,41,93,37,"callbackId"],[69,51,93,47],[69,53,93,49],[70,12,94,8,"callback"],[70,20,94,16],[71,12,95,8,"startTime"],[71,21,95,17],[71,23,95,19],[72,10,96,6],[72,11,96,7],[72,12,96,8],[73,8,97,4],[73,9,97,5],[74,8,99,4,"unregisterFrameCallback"],[74,31,99,27,"unregisterFrameCallback"],[74,32,99,28,"callbackId"],[74,42,99,46],[74,44,99,48],[75,10,100,6],[75,14,100,10],[75,15,100,11,"manageStateFrameCallback"],[75,39,100,35],[75,40,100,36,"callbackId"],[75,50,100,46],[75,52,100,48],[75,57,100,53],[75,58,100,54],[76,10,101,6],[76,14,101,10],[76,15,101,11,"frameCallbackRegistry"],[76,36,101,32],[76,37,101,33,"delete"],[76,43,101,39],[76,44,101,40,"callbackId"],[76,54,101,50],[76,55,101,51],[77,8,102,4],[77,9,102,5],[78,8,104,4,"manageStateFrameCallback"],[78,32,104,28,"manageStateFrameCallback"],[78,33,104,29,"callbackId"],[78,43,104,47],[78,45,104,49,"state"],[78,50,104,63],[78,52,104,65],[79,10,105,6],[79,14,105,10,"callbackId"],[79,24,105,20],[79,31,105,27],[79,33,105,29],[80,12,106,8],[81,10,107,6],[82,10,108,6],[82,14,108,10,"state"],[82,19,108,15],[82,21,108,17],[83,12,109,8],[83,16,109,12],[83,17,109,13,"activeFrameCallbacks"],[83,37,109,33],[83,38,109,34,"add"],[83,41,109,37],[83,42,109,38,"callbackId"],[83,52,109,48],[83,53,109,49],[84,12,110,8],[84,16,110,12],[84,17,110,13,"runCallbacks"],[84,29,110,25],[84,30,110,26],[84,34,110,30],[84,35,110,31,"nextCallId"],[84,45,110,41],[84,46,110,42],[85,10,111,6],[85,11,111,7],[85,17,111,13],[86,12,112,8],[86,16,112,14,"callback"],[86,24,112,22],[86,27,112,25],[86,31,112,29],[86,32,112,30,"frameCallbackRegistry"],[86,53,112,51],[86,54,112,52,"get"],[86,57,112,55],[86,58,112,56,"callbackId"],[86,68,112,66],[86,69,112,68],[87,12,113,8,"callback"],[87,20,113,16],[87,21,113,17,"startTime"],[87,30,113,26],[87,33,113,29],[87,37,113,33],[88,12,115,8],[88,16,115,12],[88,17,115,13,"activeFrameCallbacks"],[88,37,115,33],[88,38,115,34,"delete"],[88,44,115,40],[88,45,115,41,"callbackId"],[88,55,115,51],[88,56,115,52],[89,12,116,8],[89,16,116,12],[89,20,116,16],[89,21,116,17,"activeFrameCallbacks"],[89,41,116,37],[89,42,116,38,"size"],[89,46,116,42],[89,51,116,47],[89,52,116,48],[89,54,116,50],[90,14,117,10],[90,18,117,14],[90,19,117,15,"nextCallId"],[90,29,117,25],[90,33,117,29],[90,34,117,30],[91,12,118,8],[92,10,119,6],[93,8,120,4],[94,6,121,2],[94,7,121,3],[95,6,123,2,"global"],[95,12,123,8],[95,13,123,9,"_frameCallbackRegistry"],[95,35,123,31],[95,38,123,34,"frameCallbackRegistry"],[95,59,123,55],[96,4,124,0],[96,5,124,1],[97,4,124,1,"reactNativeReanimated_FrameCallbackRegistryUITs1"],[97,52,124,1],[97,53,124,1,"__closure"],[97,62,124,1],[98,4,124,1,"reactNativeReanimated_FrameCallbackRegistryUITs1"],[98,52,124,1],[98,53,124,1,"__workletHash"],[98,66,124,1],[99,4,124,1,"reactNativeReanimated_FrameCallbackRegistryUITs1"],[99,52,124,1],[99,53,124,1,"__initData"],[99,63,124,1],[99,66,124,1,"_worklet_5591855314696_init_data"],[99,98,124,1],[100,4,124,1],[100,11,124,1,"reactNativeReanimated_FrameCallbackRegistryUITs1"],[100,59,124,1],[101,2,124,1],[101,3,29,52],[101,5,124,1],[101,6,124,2],[102,0,124,3],[102,3]],"functionMap":{"names":["<global>","runOnUIImmediately$argument_0","frameCallbackRegistry.runCallbacks","loop","activeFrameCallbacks.forEach$argument_0","frameCallbackRegistry.registerFrameCallback","frameCallbackRegistry.unregisterFrameCallback","frameCallbackRegistry.manageStateFrameCallback"],"mappings":"AAA;oDC4B;ICS;mBCC;0CCU;SDsB;ODQ;KDQ;IIE;KJQ;IKE;KLG;IME;KNgB;CDI"},"hasCjsExports":false},"type":"js/module"}]}